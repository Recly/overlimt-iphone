{"version":3,"sources":["webpack:///./src/components/Calls/Recent.vue?a857","webpack:///./src/components/Calls/RecentItem.vue?ef3c","webpack:///src/components/Calls/RecentItem.vue","webpack:///./src/components/Calls/RecentItem.vue?c7e1","webpack:///./src/components/Calls/RecentItem.vue","webpack:///src/components/Calls/Recent.vue","webpack:///./src/components/Calls/Recent.vue?57e3","webpack:///./src/components/Calls/Recent.vue","webpack:///./src/components/Calls/Recent.vue?e375"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","item","index","class","selected","on","$event","switchOptions","_v","_s","option","edit","editor","attrs","filtered","staticRenderFns","recentList","length","deleteRecent","_e","name","params","phone","number","type","callTypes","getRecentTime","time","component"],"mappings":"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","file":"js/chunk-2bb62438.e1ec602f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recent calls-fixed-height\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"nav\"},[_c('div',{staticClass:\"switch-calls\"},_vm._l((_vm.switchCalls),function(item,index){return _c('button',{staticClass:\"switch-calls__button\",class:{'switch-calls__button_selected': item.selected},on:{\"click\":function($event){return _vm.switchOptions(index)}}},[_vm._v(_vm._s(item.option))])}),0),_c('button',{staticClass:\"nav__option\",on:{\"click\":_vm.edit}},[_vm._v(_vm._s(_vm.editor ? \"Готово\" : \"Править\"))])]),_c('h1',{staticClass:\"header__title\"},[_vm._v(\"Недавние\")])]),_c('RecentItem',{attrs:{\"isEdit\":_vm.editor,\"filtered\":_vm.filtered}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"recent-history\"},[(!_vm.recentList.length)?_c('p',{staticClass:\"phone__info\"},[_vm._v(_vm._s(_vm.filtered ? \"Нет пропущенных\" : \"Нет недавних\")+\" \")]):_vm._l((_vm.recentList),function(item,index){return _c('div',{staticClass:\"recent-item\"},[(_vm.isEdit)?_c('button',{staticClass:\"calls__delete\",on:{\"click\":function($event){return _vm.deleteRecent(item)}}}):_vm._e(),_c('router-link',{staticClass:\"recent-data\",attrs:{\"to\":{name: 'ContactInfo', params: {phone: item.number}}}},[_c('div',{staticClass:\"recent-data__info\"},[_c('h1',{staticClass:\"recent-data__number\",class:{'recent-data__number_red': item.type == 'missed'}},[_vm._v(\" \"+_vm._s(item.name || item.number))]),_c('p',{staticClass:\"recent-data__call-type\"},[_vm._v(_vm._s(_vm.callTypes[item.type]))])]),_c('p',{staticClass:\"recent-data__time\"},[_vm._v(_vm._s(_vm.getRecentTime(item.time))+\" \")])])],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\r\n\r\n  .recent-history\r\n    p(v-if='!recentList.length').phone__info.\r\n      {{filtered ? \"Нет пропущенных\" : \"Нет недавних\"}}\r\n      \r\n    .recent-item(v-else v-for='(item, index) in recentList')\r\n      button(v-if='isEdit' @click='deleteRecent(item)').calls__delete\r\n      router-link(:to=\"{name: 'ContactInfo', params: {phone: item.number}}\").recent-data\r\n        .recent-data__info\r\n          h1(\r\n            :class=\"{'recent-data__number_red': item.type == 'missed'}\"\r\n          ).recent-data__number  {{item.name || item.number}}\r\n          p.recent-data__call-type {{callTypes[item.type]}}\r\n        p.recent-data__time {{getRecentTime(item.time)}}  \r\n\r\n</template>\r\n\r\n<script>\r\n\r\n  import {mapState} from 'vuex'\r\n  import moment from 'moment'\r\n\r\n  export default {\r\n    name: 'RecentCallsHistory',\r\n    props: {\r\n      isEdit: Boolean,\r\n      filtered: Boolean\r\n    },\r\n    data() {\r\n      return {\r\n        callTypes: {\r\n          'missed': 'Пропущенный',\r\n          'incoming': 'Входящий',\r\n          'outward': 'Исходящий'\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      deleteRecent(item) {\r\n        this.$store.commit('DELETE_RECENT_FROM_CALLS', item.time);\r\n        \r\n        if (!this.calls.recent.length) \r\n          this.$alert.show('Список недавних очищен')\r\n      },\r\n      getRecentTime(time) {\r\n        return moment(time).format('LT')\r\n      }\r\n    },\r\n    computed: {\r\n      ...mapState(['calls']),\r\n      recentList() {\r\n\r\n        // сделал ГЛУБОКУЮ копию массива, чтобы у нас не записывалось свойство name в calls.recent\r\n\r\n        // другого способа, увы, нет. при использовании spread или Object.assign создавалась \r\n        // поверхностная копия массива, а все объекты внутри него являлись ссылкой на calls.recent\r\n        let listRecent = JSON.parse(JSON.stringify(this.calls.recent)),\r\n            contacts   = this.calls.contacts,\r\n            findContact;\r\n        \r\n        listRecent.sort((a,b) => b.time - a.time)\r\n\r\n        listRecent.forEach((item, index) => {\r\n\r\n          item.index = index\r\n\r\n          findContact = contacts.find(contact => contact.number == item.number);\r\n\r\n          if (findContact) \r\n            item.name = findContact.name;\r\n          \r\n        })\r\n\r\n        if (this.filtered) \r\n          return listRecent.filter(item => item.type == 'missed')\r\n\r\n        else return listRecent\r\n\r\n      }\r\n    },\r\n    created() {\r\n      this.$store.commit('CHECK_ALL_RECENTS')\r\n    }\r\n  }\r\n</script>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecentItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RecentItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RecentItem.vue?vue&type=template&id=171c175f&lang=pug&\"\nimport script from \"./RecentItem.vue?vue&type=script&lang=js&\"\nexport * from \"./RecentItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template lang=\"pug\">\r\n  .recent.calls-fixed-height\r\n    .header\r\n      .nav\r\n        .switch-calls\r\n          button(\r\n            v-for='(item,index) in switchCalls'\r\n            :class=\"{'switch-calls__button_selected': item.selected}\" \r\n            @click='switchOptions(index)'\r\n          ).switch-calls__button {{item.option}}\r\n\r\n        button(@click='edit').nav__option {{editor ? \"Готово\" : \"Править\"}}\r\n      \r\n      h1.header__title Недавние\r\n\r\n    RecentItem(:isEdit='editor' :filtered='filtered')\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n  import RecentItem from './RecentItem'\r\n\r\n  export default {\r\n    name: 'RecentCalls',\r\n    components: {\r\n      RecentItem\r\n    },\r\n    data() {\r\n      return {\r\n        switchCalls: [\r\n          {option: 'Все', selected: true},\r\n          {option: 'Пропущ.', selected: false},\r\n        ],\r\n        editor: false,\r\n        filtered: false\r\n      }\r\n    },\r\n    methods: {\r\n      switchOptions(i) {\r\n        this.filtered = i ? true : false\r\n        this.switchCalls.map(item => item.selected = false);\r\n        this.switchCalls[i].selected = true\r\n      },\r\n      edit() {\r\n        this.editor = !this.editor\r\n      }\r\n    },\r\n  }\r\n\r\n</script>\r\n\r\n<style lang=\"sass\">\r\n\r\n  @import '../../assets/sass/phone/apps/calls/recent'\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--11-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Recent.vue?vue&type=template&id=5327e1a6&lang=pug&\"\nimport script from \"./Recent.vue?vue&type=script&lang=js&\"\nexport * from \"./Recent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Recent.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recent.vue?vue&type=style&index=0&lang=sass&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Recent.vue?vue&type=style&index=0&lang=sass&\""],"sourceRoot":""}