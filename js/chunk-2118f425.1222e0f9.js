(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2118f425"],{3520:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"messages-wrapper"},[a("div",{staticClass:"message-header"},[a("div",{staticClass:"message-header__wrapper"},[a("div",{staticClass:"message-header__back",on:{click:e.goBack}},[a("svg",{staticClass:"message-header__arrow"},[a("use",{attrs:{"xlink:href":"#arrow"}})]),e.messagesCount>0?a("p",{staticClass:"message-header__count"},[e._v(e._s(e.messagesCount)+" ")]):e._e()]),a("router-link",{staticClass:"message-header__title",attrs:{to:{name:"ContactInfo",params:{phone:e.number}}}},[e._v(e._s(e.findContact||e.number)+" ")])],1)]),a("MessagesHistory",{attrs:{number:e.number}}),a("div",{staticClass:"send-message"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.message,expression:"message",modifiers:{trim:!0}}],ref:"messageInput",staticClass:"send-message__input",attrs:{type:"text",placeholder:"Сообщение"},domProps:{value:e.message},on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.sendMessage(s)},input:function(s){s.target.composing||(e.message=s.target.value.trim())},blur:function(s){return e.$forceUpdate()}}}),a("button",{staticClass:"send-message__send",on:{click:e.sendMessage}},[a("img",{staticClass:"send-message__icon",attrs:{src:t("e128")}})])])],1)},n=[],r=(t("7db0"),t("caad"),t("b0c0"),t("a9e3"),t("2532"),t("5530")),i=t("2f62"),c=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"messages-history"},[e.allMessages?t("div",{ref:"msggg",staticClass:"all-messages"},e._l(e.allMessages.list,(function(s,a){return t("div",{staticClass:"all-messages__message"},[e.calcTime(a)?t("p",{staticClass:"all-messages__time"},[e._v(e._s(e.calcTime(a))+" ")]):e._e(),t("div",{staticClass:"all-messages__item",class:s.from==e.myNumber?"all-messages__item_my":"all-messages__item_sender"},[t("p",[e._v(e._s(s.text)+" ")])])])})),0):t("p",{staticClass:"phone__info"},[e._v("Нет сообщений")])])},o=[],u=t("c1df"),l=t.n(u),m={props:{number:[Number,String]},computed:Object(r["a"])(Object(r["a"])({},Object(i["d"])({myNumber:function(e){return e.player.phoneNumber},messages:function(e){return e.messages}})),{},{allMessages:function(){var e=this;return this.messages.find((function(s){var t=s.number;return t==e.number}))}}),methods:{calcTime:function(e){var s,t=this.allMessages;return s=t.list[e-1]?l()(t.list[e-1].time).diff(t.list[e].time,"hours"):null,0===e||s<=-1?l()(t.list[e].time).calendar():null},scrollBottom:function(){this.$store.dispatch("READ_MESSAGE",this.number),this.$nextTick((function(){var e=document.querySelector(".all-messages");e&&(e.scrollTop=9999999)}))}},created:function(){this.$store.commit("REFRESH_SYSTEM_STYLE",!0)},updated:function(){this.scrollBottom()},mounted:function(){this.scrollBottom()}},f=m,g=(t("4a39"),t("2877")),d=Object(g["a"])(f,c,o,!1,null,null,null),p=d.exports,h={props:{number:[Number,String]},components:{MessagesHistory:p},data:function(){return{message:"",timeDelay:0}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(i["d"])({messages:function(e){return e.messages},contacts:function(e){return e.calls.contacts},blackList:function(e){return e.calls.blocked}})),Object(i["b"])({messagesCount:"GET_UNREAD_MESSAGES_COUNT"})),{},{findMessages:function(){var e=this,s=this.messages.find((function(s){var t=s.number;return t==e.number}));return s?s.list:null},findContact:function(){var e=this,s=this.contacts.find((function(s){var t=s.number;return t==e.number}));return s?s.name:null}}),methods:{sendMessage:function(){return this.message?this.blackList.includes(parseInt(this.number))?this.$alert.show("Номер в черном списке"):this.timeDelay>=(new Date).getTime()?this.$alert.show("Подождите немного..."):(this.$store.dispatch("SEND_MESSAGE",{msg:this.message,to:this.number}),this.timeDelay=(new Date).getTime()+1500,void(this.message="")):this.$alert.show("Введите сообщение")},goBack:function(){this.$router.push({name:"Messages"})}},mounted:function(){this.$refs.messageInput.focus()}},_=h,b=Object(g["a"])(_,a,n,!1,null,null,null);s["default"]=b.exports},"483a":function(e,s,t){},"4a39":function(e,s,t){"use strict";var a=t("483a"),n=t.n(a);n.a},5899:function(e,s){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,s,t){var a=t("1d80"),n=t("5899"),r="["+n+"]",i=RegExp("^"+r+r+"*"),c=RegExp(r+r+"*$"),o=function(e){return function(s){var t=String(a(s));return 1&e&&(t=t.replace(i,"")),2&e&&(t=t.replace(c,"")),t}};e.exports={start:o(1),end:o(2),trim:o(3)}},7156:function(e,s,t){var a=t("861d"),n=t("d2bb");e.exports=function(e,s,t){var r,i;return n&&"function"==typeof(r=s.constructor)&&r!==t&&a(i=r.prototype)&&i!==t.prototype&&n(e,i),e}},a9e3:function(e,s,t){"use strict";var a=t("83ab"),n=t("da84"),r=t("94ca"),i=t("6eeb"),c=t("5135"),o=t("c6b6"),u=t("7156"),l=t("c04e"),m=t("d039"),f=t("7c73"),g=t("241c").f,d=t("06cf").f,p=t("9bf2").f,h=t("58a8").trim,_="Number",b=n[_],v=b.prototype,E=o(f(v))==_,C=function(e){var s,t,a,n,r,i,c,o,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=h(u),s=u.charCodeAt(0),43===s||45===s){if(t=u.charCodeAt(2),88===t||120===t)return NaN}else if(48===s){switch(u.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+u}for(r=u.slice(2),i=r.length,c=0;c<i;c++)if(o=r.charCodeAt(c),o<48||o>n)return NaN;return parseInt(r,a)}return+u};if(r(_,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var N,y=function(e){var s=arguments.length<1?0:e,t=this;return t instanceof y&&(E?m((function(){v.valueOf.call(t)})):o(t)!=_)?u(new b(C(s)),t,y):C(s)},I=a?g(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;I.length>k;k++)c(b,N=I[k])&&!c(y,N)&&p(y,N,d(b,N));y.prototype=v,v.constructor=y,i(n,_,y)}},e128:function(e,s,t){e.exports=t.p+"img/send.23e808f7.svg"}}]);
//# sourceMappingURL=chunk-2118f425.1222e0f9.js.map